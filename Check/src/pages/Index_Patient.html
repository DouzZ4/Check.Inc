<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Inicio - Usuario</title>
    <link rel="stylesheet" href="../assets/styles/Main.css">
    <link rel="stylesheet" href="../assets/styles/index_patient.css">
    <style>
 
    </style>
</head>
<body>
    <!-- Barra de navegación principal -->
    <nav class="navbar">
        <div class="check">
            <label for="check">CHECK</label>
        </div>
        
        <ul class="nav-links">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="#">Historial</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-btn">Registros</a>
                <ul class="dropdown-content">
                    <li><a href="#">Alarmas</a></li> 
                    <li><a href="#">Actividades</a></li>
                    <li><a href="#">Citas</a></li>
                    <li><a href="#">Medicamentos</a></li>
                </ul>
            </li>
            <li><a href="#">Perfil</a></li>
            <li><a href="#" id="Anomalias-btn">Anomalias</a></li>
        </ul>
    </nav>
    
    <!-- Sección de bienvenida para el usuario -->
    <section class="bienvenida">
        <p>Bienvenido</p>
        <h1>Nombre Usuario</h1>
    </section>

    <!-- Sección del reporte semanal del usuario -->
    <section class="reporte-semanal">
        <img src="../assets/images/Familia_Paciente.png" alt="Imagen de familia" class="imagen-reporte">
    </section>
    <section class="Text-reporte"> 
        <h2>Tu <br> reporte <br> semanal</h2>
    </section>
    
    <!-- Contenedor de contadores -->
    <div class="contenedor-alarma">
        <!-- Primer contador de alarmas -->
        <div class="contador" id="contador-alarma-1">
            <h2>Tiempo hasta la próxima alarma:</h2>
            <div class="contador-grupo">
                <div class="digito" id="horas-decena-1">0</div>
                <div class="digito" id="horas-unidad-1">0</div>
                <span class="separador">:</span>
                <div class="digito" id="minutos-decena-1">0</div>
                <div class="digito" id="minutos-unidad-1">0</div>
                <span class="separador">:</span>
                <div class="digito" id="segundos-decena-1">0</div>
                <div class="digito" id="segundos-unidad-1">0</div>
            </div>
        </div>

        <!-- Botones de alarmas para el primer contador -->
        <section class="botones-alarmas">
            <button data-duration="7200" data-contador="1">Alarma comidas</button>
            <button data-duration="3600" data-contador="1">Alarma Toma de Glucosa</button>
        </section>

        <!-- Segundo contador de alarmas -->
        <div class="contador" id="contador-alarma-2">
            <h2>Tiempo hasta la próxima alarma 2:</h2>
            <div class="contador-grupo">
                <div class="digito" id="horas-decena-2">0</div>
                <div class="digito" id="horas-unidad-2">0</div>
                <span class="separador">:</span>
                <div class="digito" id="minutos-decena-2">0</div>
                <div class="digito" id="minutos-unidad-2">0</div>
                <span class="separador">:</span>
                <div class="digito" id="segundos-decena-2">0</div>
                <div class="digito" id="segundos-unidad-2">0</div>
            </div>
        </div>

        <!-- Botones de alarmas para el segundo contador -->
        <section class="botones-alarmas">
            <button data-duration="1800" data-contador="2">Alarma Actividad</button>
            <button data-duration="5400" data-contador="2">Alarma Ejercicio</button>
        </section>
    </div>

    <script>
        let intervalosAlarma = [null, null];  // Almacena los intervalos de las alarmas actuales

        // Actualiza el contador con la duración indicada
        function actualizarContador(duracion, contadorIndex) {
            const horasDecena = document.getElementById(`horas-decena-${contadorIndex}`);
            const horasUnidad = document.getElementById(`horas-unidad-${contadorIndex}`);
            const minutosDecena = document.getElementById(`minutos-decena-${contadorIndex}`);
            const minutosUnidad = document.getElementById(`minutos-unidad-${contadorIndex}`);
            const segundosDecena = document.getElementById(`segundos-decena-${contadorIndex}`);
            const segundosUnidad = document.getElementById(`segundos-unidad-${contadorIndex}`);

            const actualizarPantalla = () => {
                let horas = Math.floor(duracion / 3600);
                let minutos = Math.floor((duracion % 3600) / 60);
                let segundos = duracion % 60;
                
                horasDecena.textContent = Math.floor(horas / 10);
                horasUnidad.textContent = horas % 10;
                minutosDecena.textContent = Math.floor(minutos / 10);
                minutosUnidad.textContent = minutos % 10;
                segundosDecena.textContent = Math.floor(segundos / 10);
                segundosUnidad.textContent = segundos % 10;

                if (duracion <= 0) {
                    clearInterval(intervalosAlarma[contadorIndex - 1]);
                    // Opcional: Resetear contadores
                    horasDecena.textContent = '0';
                    horasUnidad.textContent = '0';
                    minutosDecena.textContent = '0';
                    minutosUnidad.textContent = '0';
                    segundosDecena.textContent = '0';
                    segundosUnidad.textContent = '0';
                }
                duracion--;
            };

            clearInterval(intervalosAlarma[contadorIndex - 1]);  // Limpia cualquier alarma previa
            actualizarPantalla();  // Actualiza la primera vez inmediatamente
            intervalosAlarma[contadorIndex - 1] = setInterval(actualizarPantalla, 1000);  // Configura el intervalo
        }

        // Cambia la duración de la alarma al hacer clic en un botón
        document.querySelectorAll('.botones-alarmas button').forEach(button => {
            button.addEventListener('click', () => {
                const duracion = parseInt(button.getAttribute('data-duration'));
                const contadorIndex = parseInt(button.getAttribute('data-contador'));
                actualizarContador(duracion, contadorIndex);
                
                // Estilo visual para el botón activo
                document.querySelectorAll('.botones-alarmas button').forEach(btn => btn.style.backgroundColor = '#3058a6');
                button.style.backgroundColor = '#f45501';
            });
        });
    </script>
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 Tu Nombre o Proyecto</p>
            <ul class="social-icons">
                <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                <li><a href="#"><i class="fab fa-instagram"></i></a></li>
            </ul>
        </div>
    </footer>
</body>
</html>
